{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./Modal.css\";import CancelIcon from\"@mui/icons-material/Cancel\";import axios from\"axios\";import{message}from\"antd\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ADDCATEGORYModal=function ADDCATEGORYModal(_ref){var closemodal=_ref.closemodal;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),category_name=_useState2[0],setCategory_Name=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var image64;var base64=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;file=e.target.files[0];_context.next=4;return convertimage(file);case 4:image64=_context.sent;message.success(\"Image chosen Successfully\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);message.error(\"Please choose again\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function base64(_x){return _ref2.apply(this,arguments);};}();var convertimage=function convertimage(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){return resolve(reader.result);};reader.onerror=function(error){return reject(error);};});};var uploadimage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var baseindex,type,Content,authToken,img,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(image64){_context2.next=2;break;}return _context2.abrupt(\"return\",message.error(\"Please choose an image\"));case 2:_context2.prev=2;e.preventDefault();baseindex=image64.indexOf(\"base64,\");type=image64.slice(11,baseindex-1);Content=\"image/\"+image64.slice(11,baseindex-1);authToken=localStorage.getItem(\"authToken\");img=image64.slice(baseindex+7);_context2.next=11;return axios.post(\"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",{img:img,type:type,Content:Content},{headers:{authToken:authToken,\"Content-Type\":\"application/json\"}});case 11:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setImage(data);message.success(\"Image uploaded Successfully\");_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](2);message.error(\"Error uploading image\");case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[2,17]]);}));return function uploadimage(_x2){return _ref3.apply(this,arguments);};}();var addcategory=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!(!category_name||!image.url)){_context3.next=3;break;}return _context3.abrupt(\"return\",message.error(\"Please fill all the fields or please click on upload button to upload image\"));case 3:authToken=localStorage.getItem(\"authToken\");_context3.next=6;return axios.post(\"https://s7m75bvdv3.execute-api.ap-south-1.amazonaws.com/Prod/admin/addCategory\",{category_name:category_name,url:image.url},{headers:{authToken:authToken}});case 6:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;message.success(\"Category added Successfully\");closemodal(false);window.location.reload();_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);message.error(\"Category not added\");case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,13]]);}));return function addcategory(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__container\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modalTitle\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Category\"}),/*#__PURE__*/_jsx(CancelIcon,{onClick:function onClick(){return closemodal(false);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editForm\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scroll__container\",style:{height:\"70%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category Name\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"text\",placeholder:\"Enter new category name\",onChange:function onChange(e){return setCategory_Name(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Add Image\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"button__type5\",onClick:uploadimage,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",autoComplete:\"new-password\",placeholder:\"Upload Image\",onChange:function onChange(e){return base64(e);}}),\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBottom\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button__type4\",onClick:function onClick(e){return addcategory(e);},children:\"Done\"})})]})]})});};export default ADDCATEGORYModal;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/components/ADDCATEGORYModal.jsx"],"names":["React","useState","useEffect","CancelIcon","axios","message","useNavigate","ADDCATEGORYModal","closemodal","navigate","category_name","setCategory_Name","image","setImage","image64","base64","e","file","target","files","convertimage","success","error","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","uploadimage","preventDefault","baseindex","indexOf","type","slice","Content","authToken","localStorage","getItem","img","post","headers","data","addcategory","url","window","location","reload","width","height","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Modal.css\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ADDCATEGORYModal = ({ closemodal }) => {\r\n  const navigate = useNavigate();\r\n  const [category_name, setCategory_Name] = useState(\"\");\r\n  const [image, setImage] = useState({});\r\n  let image64;\r\n\r\n  const base64 = async (e) => {\r\n    try {\r\n      const file = e.target.files[0];\r\n      image64 = await convertimage(file);\r\n\r\n      message.success(\"Image chosen Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Please choose again\");\r\n    }\r\n  };\r\n\r\n  const convertimage = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = (error) => reject(error);\r\n    });\r\n  };\r\n\r\n  const uploadimage = async (e) => {\r\n    if (!image64) {\r\n      return message.error(\"Please choose an image\");\r\n    }\r\n    try {\r\n      e.preventDefault();\r\n      const baseindex = image64.indexOf(\"base64,\");\r\n\r\n      const type = image64.slice(11, baseindex - 1);\r\n      const Content = \"image/\" + image64.slice(11, baseindex - 1);\r\n\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const img = image64.slice(baseindex + 7);\r\n\r\n      const { data } = await axios.post(\r\n        \"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",\r\n        { img, type, Content },\r\n        {\r\n          headers: {\r\n            authToken,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      setImage(data);\r\n      message.success(\"Image uploaded Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Error uploading image\");\r\n    }\r\n  };\r\n  const addcategory = async (e) => {\r\n    try {\r\n      if (!category_name || !image.url) {\r\n        return message.error(\r\n          \"Please fill all the fields or please click on upload button to upload image\"\r\n        );\r\n      }\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const { data } = await axios.post(\r\n        \"https://s7m75bvdv3.execute-api.ap-south-1.amazonaws.com/Prod/admin/addCategory\",\r\n        { category_name, url: image.url },\r\n        { headers: { authToken } }\r\n      );\r\n\r\n      message.success(\"Category added Successfully\");\r\n      closemodal(false);\r\n      window.location.reload();\r\n    } catch (err) {\r\n      message.error(\"Category not added\");\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal__container\" style={{ width: \"40%\" }}>\r\n        <div className=\"modalTitle\">\r\n          <h2>Create Category</h2>\r\n          <CancelIcon onClick={() => closemodal(false)} />\r\n        </div>\r\n        <div className=\"editForm\" style={{ width: \"100%\" }}>\r\n          <div className=\"scroll__container\" style={{ height: \"70%\" }}>\r\n            <div className=\"editField\">\r\n              <p>Category Name</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"text\"\r\n                placeholder=\"Enter new category name\"\r\n                onChange={(e) => setCategory_Name(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"editField\">\r\n              <p>\r\n                Add Image{\" \"}\r\n                <button className=\"button__type5\" onClick={uploadimage}>\r\n                  Upload\r\n                </button>\r\n              </p>\r\n              <input\r\n                type=\"file\"\r\n                autoComplete=\"new-password\"\r\n                placeholder=\"Upload Image\"\r\n                onChange={(e) => base64(e)}\r\n              />{\" \"}\r\n            </div>\r\n          </div>\r\n          <div className=\"modalBottom\">\r\n            <button className=\"button__type4\" onClick={(e) => addcategory(e)}>\r\n              Done\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ADDCATEGORYModal;\r\n"]},"metadata":{},"sourceType":"module"}