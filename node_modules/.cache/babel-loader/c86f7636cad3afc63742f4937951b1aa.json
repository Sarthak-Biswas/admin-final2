{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import Loading from\"../components/Loading\";import axios from\"axios\";import{message}from\"antd\";import\"antd/dist/antd.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SingleOrderScreen=function SingleOrderScreen(){var navigate=useNavigate();var _useParams=useParams(),order_id=_useParams.order_id;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),tracking_id=_useState4[0],setTrackingId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newStatus=_useState6[0],setNewStatus=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),orders=_useState10[0],setOrders=_useState10[1];useEffect(function(){var getOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var authToken,_yield$axios$post,data,orderdetails,orderuser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;authToken=localStorage.getItem(\"authToken\");_context.next=4;return axios.post(\"https://odqtj7h43g.execute-api.ap-south-1.amazonaws.com/Prod/admin/viewOrder\",{order_id:order_id},{headers:{authToken:authToken}});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;orderdetails=data.slice(0,data.length-1);setOrders(orderdetails);orderuser=data.slice(data.length-1);setUser(orderuser);setNewStatus(data[0].status);console.log(orders);setTrackingId(data[0].tracking_id);setLoading(false);_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);message.error(\"There is some error here\");case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function getOrder(){return _ref.apply(this,arguments);};}();getOrder();},[order_id]);var updateOrder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;authToken=localStorage.getItem(\"authToken\");_context2.next=5;return axios.post(\"https://7xxsn5qd39.execute-api.ap-south-1.amazonaws.com/Prod/admin/editOrder\",{order_id:order_id,status:newStatus,tracking_id:tracking_id},{headers:{authToken:authToken}});case 5:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;message.success(\"Order updated successfully\");navigate(\"/orders\");_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);message.error(\"There is some error\");case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function updateOrder(_x){return _ref2.apply(this,arguments);};}();var cancelOrder=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var authToken,_yield$axios$post3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.prev=1;authToken=localStorage.getItem(\"authToken\");_context3.next=5;return axios.post(\"https://7xxsn5qd39.execute-api.ap-south-1.amazonaws.com/Prod/admin/editOrder\",{order_id:order_id,status:\"Cancelled\",tracking_id:tracking_id},{headers:{authToken:authToken}});case 5:_yield$axios$post3=_context3.sent;data=_yield$axios$post3.data;message.success(\"Order cancelled successfully\");navigate(\"/orders\");_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);message.error(\"There is some error\");case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function cancelOrder(_x2){return _ref3.apply(this,arguments);};}();// console.log(\"tp\", totalprice);\nvar total=0;for(var i=0;i<orders.length;i++){total=total+orders[i].total*orders[i].quantity;}console.log(\"total\",total);return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainerTop\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"pageHeading\",children:orders[0].order_id}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_type3\",style:{backgroundColor:\"#F33535\"},onClick:function onClick(e){return cancelOrder(e);},children:\"Cancel Order\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"scroll__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"editForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Order Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"Pending\",id:\"Pending\",name:\"orderstatus\",checked:newStatus===\"Pending\",onClick:function onClick(){return setNewStatus(\"Pending\");}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"1\",children:\"Pending\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"Packing\",id:\"Packing\",name:\"orderstatus\",checked:newStatus===\"Packing\",onClick:function onClick(){return setNewStatus(\"Packing\");}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"2\",children:\"Packing\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"OutforDelivery\",id:\"OutforDelivery\",name:\"orderstatus\",checked:newStatus===\"OutforDelivery\",onClick:function onClick(){return setNewStatus(\"OutforDelivery\");}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"3\",children:\"Out For Delivery\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"Delivered\",id:\"Delivered\",name:\"orderstatus\",checked:newStatus===\"Delivered\",onClick:function onClick(){return setNewStatus(\"Delivered\");}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"3\",children:\"Delivered\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Order By\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"15px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:user[0].user_picture,alt:\"\",style:{width:\"100px\",height:\"70px\",borderRadius:\"5px\",marginRight:\"20px\"}}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"17px\"},children:[\" \",user[0].user_name]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Delivery Address\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"desc\",value:orders[0].address,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Total Price (in Rs)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:total,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:orders[0].payment_mode,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Date & Time\"}),/*#__PURE__*/_jsxs(\"div\",{children:[orders[0].create_date.slice(0,10),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",orders[0].create_date.slice(10)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Tracking ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tracking_id,onChange:function onChange(e){return setTrackingId(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Product Ordered\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"15px\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-around\"// alignItems: \"center\",\n},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"10px\",display:\"flex\",justifyContent:\"space-around\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"100px\"},children:\" Product Image\"}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"30%\",textAlign:\"center\"},children:[\" \",\"Product Name\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"20%\",textAlign:\"center\"},children:[\" \",\"Quantity\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"20%\",textAlign:\"center\"},children:[\" \",\"Product Price\"]})]}),orders.map(function(order){return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"5px\",display:\"flex\",justifyContent:\"space-around\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"img\",{src:order.product_image,alt:\"\",style:{width:\"100px\",height:\"70px\",borderRadius:\"5px\"// marginRight: \"20px\",\n}}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"15px\",width:\"30%\",textAlign:\"center\"},children:[\" \",order.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"20%\",fontSize:\"15px\",textAlign:\"center\"},children:[\" \",order.quantity]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"15px\",width:\"20%\",textAlign:\"center\"},children:[\" \",order.total]})]},order.id);})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_type3\",style:{backgroundColor:\"#18134C\",margin:\"0 auto 0 auto\"},onClick:function onClick(e){return updateOrder(e);},children:\"Save Changes\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"screen__bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bottom__left\"})})]})})});};export default SingleOrderScreen;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/screens/SingleOrderScreen.jsx"],"names":["React","useState","useEffect","useNavigate","useParams","Loading","axios","message","SingleOrderScreen","navigate","order_id","loading","setLoading","tracking_id","setTrackingId","newStatus","setNewStatus","user","setUser","orders","setOrders","getOrder","authToken","localStorage","getItem","post","headers","data","orderdetails","slice","length","orderuser","status","console","log","error","updateOrder","e","preventDefault","success","cancelOrder","total","i","quantity","backgroundColor","padding","user_picture","width","height","borderRadius","marginRight","fontSize","user_name","address","payment_mode","create_date","target","value","display","flexDirection","justifyContent","marginBottom","alignItems","textAlign","map","order","product_image","name","id","margin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Loading from \"../components/Loading\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\n\r\nconst SingleOrderScreen = () => {\r\n  const navigate = useNavigate();\r\n  const { order_id } = useParams();\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [tracking_id, setTrackingId] = useState(\"\");\r\n  const [newStatus, setNewStatus] = useState(\"\");\r\n  const [user, setUser] = useState([]);\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getOrder = async () => {\r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://odqtj7h43g.execute-api.ap-south-1.amazonaws.com/Prod/admin/viewOrder\",\r\n          { order_id: order_id },\r\n          { headers: { authToken } }\r\n        );\r\n\r\n        const orderdetails = data.slice(0, data.length - 1);\r\n        setOrders(orderdetails);\r\n        const orderuser = data.slice(data.length - 1);\r\n        setUser(orderuser);\r\n        setNewStatus(data[0].status);\r\n        console.log(orders);\r\n        setTrackingId(data[0].tracking_id);\r\n      \r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.log(err);\r\n        message.error(\"There is some error here\");\r\n      }\r\n    };\r\n    getOrder();\r\n  }, [order_id]);\r\n\r\n  const updateOrder = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const { data } = await axios.post(\r\n        \"https://7xxsn5qd39.execute-api.ap-south-1.amazonaws.com/Prod/admin/editOrder\",\r\n        {\r\n          order_id: order_id,\r\n          status: newStatus,\r\n          tracking_id: tracking_id,\r\n        },\r\n        { headers: { authToken } }\r\n      );\r\n      message.success(\"Order updated successfully\");\r\n      navigate(\"/orders\");\r\n    } catch (err) {\r\n      message.error(\"There is some error\");\r\n    }\r\n  };\r\n\r\n  const cancelOrder = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const { data } = await axios.post(\r\n        \"https://7xxsn5qd39.execute-api.ap-south-1.amazonaws.com/Prod/admin/editOrder\",\r\n        {\r\n          order_id: order_id,\r\n          status: \"Cancelled\",\r\n          tracking_id: tracking_id,\r\n        },\r\n        { headers: { authToken } }\r\n      );\r\n      message.success(\"Order cancelled successfully\");\r\n      navigate(\"/orders\");\r\n    } catch (err) {\r\n      message.error(\"There is some error\");\r\n    }\r\n  };\r\n\r\n  // console.log(\"tp\", totalprice);\r\n\r\n  let total = 0;\r\n\r\n  for (var i = 0; i < orders.length; i++) {\r\n    total = total + orders[i].total * orders[i].quantity;\r\n  }\r\n\r\n  console.log(\"total\", total);\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <div className=\"pageContainer\">\r\n            <div className=\"pageContainerTop\">\r\n              <p className=\"pageHeading\">{orders[0].order_id}</p>\r\n              <button\r\n                className=\"btn_type3\"\r\n                style={{ backgroundColor: \"#F33535\" }}\r\n                onClick={(e) => cancelOrder(e)}\r\n              >\r\n                Cancel Order\r\n              </button>\r\n            </div>\r\n            <div className=\"line\" />\r\n            <div className=\"scroll__container\">\r\n              <div className=\"editForm\">\r\n                <div className=\"editField\">\r\n                  <p>Order Status</p>\r\n                  <div className=\"radio\">\r\n                    <div>\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"Pending\"\r\n                        id=\"Pending\"\r\n                        name=\"orderstatus\"\r\n                        checked={newStatus === \"Pending\"}\r\n                        onClick={() => setNewStatus(\"Pending\")}\r\n                      />\r\n                      <label htmlFor=\"1\">Pending</label>\r\n                    </div>\r\n                    <div>\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"Packing\"\r\n                        id=\"Packing\"\r\n                        name=\"orderstatus\"\r\n                        checked={newStatus === \"Packing\"}\r\n                        onClick={() => setNewStatus(\"Packing\")}\r\n                      />\r\n                      <label htmlFor=\"2\">Packing</label>\r\n                    </div>\r\n                    <div>\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"OutforDelivery\"\r\n                        id=\"OutforDelivery\"\r\n                        name=\"orderstatus\"\r\n                        checked={newStatus === \"OutforDelivery\"}\r\n                        onClick={() => setNewStatus(\"OutforDelivery\")}\r\n                      />\r\n                      <label htmlFor=\"3\">Out For Delivery</label>\r\n                    </div>\r\n                    <div>\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"Delivered\"\r\n                        id=\"Delivered\"\r\n                        name=\"orderstatus\"\r\n                        checked={newStatus === \"Delivered\"}\r\n                        onClick={() => setNewStatus(\"Delivered\")}\r\n                      />\r\n                      <label htmlFor=\"3\">Delivered</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"editField\">\r\n                  <p>Order By</p>\r\n                  <div style={{ padding: \"15px\" }}>\r\n                    <img\r\n                      src={user[0].user_picture}\r\n                      alt=\"\"\r\n                      style={{\r\n                        width: \"100px\",\r\n                        height: \"70px\",\r\n                        borderRadius: \"5px\",\r\n                        marginRight: \"20px\",\r\n                      }}\r\n                    />\r\n                    <span style={{ fontSize: \"17px\" }}>\r\n                      {\" \"}\r\n                      {user[0].user_name}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"editField\">\r\n                  <p>Delivery Address</p>\r\n                  <textarea name=\"desc\" value={orders[0].address} disabled />\r\n                </div>\r\n                <div className=\"editField\">\r\n                  <p>Total Price (in Rs)</p>\r\n                  <input type=\"text\" value={total} disabled />\r\n                </div>\r\n                <div className=\"editField\">\r\n                  <p>Payment Mode</p>\r\n                  <input type=\"text\" value={orders[0].payment_mode} disabled />\r\n                </div>\r\n                <div className=\"editField\">\r\n                  <p>Date & Time</p>\r\n\r\n                  <div>\r\n                    {orders[0].create_date.slice(0, 10)}\r\n                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                    {orders[0].create_date.slice(10)}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"editField\">\r\n                  <p>Tracking ID</p>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={tracking_id}\r\n                    onChange={(e) => setTrackingId(e.target.value)}\r\n                  />\r\n                </div>\r\n                <div className=\"editField\">\r\n                  <p>Product Ordered</p>\r\n\r\n                  <div\r\n                    style={{\r\n                      padding: \"15px\",\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      justifyContent: \"space-around\",\r\n                      // alignItems: \"center\",\r\n                    }}\r\n                  >\r\n                    <div\r\n                      style={{\r\n                        marginBottom: \"10px\",\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-around\",\r\n                        alignItems: \"center\",\r\n                      }}\r\n                    >\r\n                      <div style={{ width: \"100px\" }}> Product Image</div>\r\n                      <div\r\n                        style={{\r\n                          width: \"30%\",\r\n                          textAlign: \"center\",\r\n                        }}\r\n                      >\r\n                        {\" \"}\r\n                        Product Name\r\n                      </div>\r\n                      <div\r\n                        style={{\r\n                          width: \"20%\",\r\n                          textAlign: \"center\",\r\n                        }}\r\n                      >\r\n                        {\" \"}\r\n                        Quantity\r\n                      </div>\r\n                      <div\r\n                        style={{\r\n                          width: \"20%\",\r\n                          textAlign: \"center\",\r\n                        }}\r\n                      >\r\n                        {\" \"}\r\n                        Product Price\r\n                      </div>\r\n                    </div>\r\n                    {orders.map((order) => (\r\n                      <div\r\n                        key={order.id}\r\n                        style={{\r\n                          marginBottom: \"5px\",\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-around\",\r\n                          alignItems: \"center\",\r\n                        }}\r\n                      >\r\n                        <img\r\n                          src={order.product_image}\r\n                          alt=\"\"\r\n                          style={{\r\n                            width: \"100px\",\r\n                            height: \"70px\",\r\n                            borderRadius: \"5px\",\r\n                            // marginRight: \"20px\",\r\n                          }}\r\n                        />\r\n                        <div\r\n                          style={{\r\n                            fontSize: \"15px\",\r\n                            width: \"30%\",\r\n\r\n                            textAlign: \"center\",\r\n                          }}\r\n                        >\r\n                          {\" \"}\r\n                          {order.name}\r\n                        </div>\r\n                        <div\r\n                          style={{\r\n                            width: \"20%\",\r\n                            fontSize: \"15px\",\r\n\r\n                            textAlign: \"center\",\r\n                          }}\r\n                        >\r\n                          {\" \"}\r\n                          {order.quantity}\r\n                        </div>\r\n                        <div\r\n                          style={{\r\n                            fontSize: \"15px\",\r\n\r\n                            width: \"20%\",\r\n                            textAlign: \"center\",\r\n                          }}\r\n                        >\r\n                          {\" \"}\r\n                          {order.total}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  className=\"btn_type3\"\r\n                  style={{\r\n                    backgroundColor: \"#18134C\",\r\n                    margin: \"0 auto 0 auto\",\r\n                  }}\r\n                  onClick={(e) => updateOrder(e)}\r\n                >\r\n                  Save Changes\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div id=\"screen__bottom\">\r\n              <div className=\"bottom__left\"></div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleOrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}