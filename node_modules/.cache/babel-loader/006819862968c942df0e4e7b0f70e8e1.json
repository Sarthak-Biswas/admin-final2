{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./Modal.css\";import CancelIcon from\"@mui/icons-material/Cancel\";import axios from\"axios\";import{message}from\"antd\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateCouponModal=function CreateCouponModal(_ref){var closeModal=_ref.closeModal;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),coupon=_useState2[0],setCoupon=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),discount=_useState4[0],setDiscount=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),valid_till=_useState6[0],setValid_till=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),pricelimit=_useState8[0],setPricelimit=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),quantity=_useState10[0],setQuantity=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),description=_useState12[0],setDescription=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];console.log(category);var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),categoryname=_useState18[0],setCategory_Name=_useState18[1];var addcoupon=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newcoupon,authToken,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newcoupon={coupon:coupon,discount:Number(discount),valid_till:valid_till.split(\"-\").reverse().join(\"-\"),pricelimit:Number(pricelimit),quantity:Number(quantity),category_name:categoryname,description:description};_context.prev=2;authToken=localStorage.getItem(\"authToken\");_context.next=6;return axios.post(\"https://klo3o8i80a.execute-api.ap-south-1.amazonaws.com/Prod/admin/addCoupon\",newcoupon,{headers:{authToken:authToken}});case 6:_yield$axios$post=_context.sent;data=_yield$axios$post.data;message.success(\"Coupon added Successfully\");closeModal(false);window.location.reload();_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);console.log(_context.t0);message.error(\"Coupon not added\");case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return function addcoupon(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var getAllCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;authToken=localStorage.getItem(\"authToken\");_context2.next=4;return axios.post(\"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",{},{headers:{authToken:authToken}});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;setCategory(data);setCategory_Name(data[0].category_name);setLoading(false);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);message.error(\"There is some error\");case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function getAllCategory(){return _ref3.apply(this,arguments);};}();getAllCategory();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modalTitle\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create a Coupon\"}),/*#__PURE__*/_jsx(CancelIcon,{onClick:function onClick(){return closeModal(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"editForm\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"scroll__container\",style:{height:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Coupon Code\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"text\",placeholder:\"Type Here\",onChange:function onChange(e){return setCoupon(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Discount( in %)\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"number\",placeholder:\"Discount in percentage\",onChange:function onChange(e){return setDiscount(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Price limit\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"number\",placeholder:\"Enter a price limit\",onChange:function onChange(e){return setPricelimit(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"number\",placeholder:\"Enter coupon quantity\",onChange:function onChange(e){return setQuantity(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Valid till\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"date\",placeholder:\"Date till which the coupon is valid\",onChange:function onChange(e){return setValid_till(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{name:\"cat\",className:\"dropdown\",onChange:function onChange(e){return setCategory_Name(e.target.value);},children:category.map(function(cat){return/*#__PURE__*/_jsx(\"option\",{value:cat.category_name,children:cat.category_name},cat.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{autoComplete:\"new-password\",name:\"coupon__desc\",placeholder:\"Add a short description (optional)\",onChange:function onChange(e){return setDescription(e.target.value);}})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBottom\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button__type4\",onClick:function onClick(e){return addcoupon(e);},children:\"Done\"})})]})});};export default CreateCouponModal;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/components/CreateCouponModal.jsx"],"names":["React","useState","useEffect","CancelIcon","axios","message","useNavigate","CreateCouponModal","closeModal","navigate","coupon","setCoupon","discount","setDiscount","valid_till","setValid_till","pricelimit","setPricelimit","quantity","setQuantity","description","setDescription","category","setCategory","loading","setLoading","console","log","categoryname","setCategory_Name","addcoupon","e","preventDefault","newcoupon","Number","split","reverse","join","category_name","authToken","localStorage","getItem","post","headers","data","success","window","location","reload","error","getAllCategory","width","height","target","value","map","cat","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Modal.css\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst CreateCouponModal = ({ closeModal }) => {\r\n  const navigate = useNavigate();\r\n  const [coupon, setCoupon] = useState(\"\");\r\n  const [discount, setDiscount] = useState();\r\n  const [valid_till, setValid_till] = useState(\"\");\r\n  const [pricelimit, setPricelimit] = useState();\r\n  const [quantity, setQuantity] = useState();\r\n  const [description, setDescription] = useState();\r\n  const [category, setCategory] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  console.log(category);\r\n  const [categoryname, setCategory_Name] = useState();\r\n\r\n  const addcoupon = async (e) => {\r\n    e.preventDefault();\r\n    const newcoupon = {\r\n      coupon,\r\n      discount: Number(discount),\r\n      valid_till:valid_till.split(\"-\").reverse().join(\"-\"),\r\n      pricelimit: Number(pricelimit),\r\n      quantity: Number(quantity),\r\n      category_name: categoryname,\r\n\r\n      description,\r\n    };\r\n \r\n\r\n    try {\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const { data } = await axios.post(\r\n        \"https://klo3o8i80a.execute-api.ap-south-1.amazonaws.com/Prod/admin/addCoupon\",\r\n        newcoupon,\r\n        { headers: { authToken } }\r\n      );\r\n\r\n      message.success(\"Coupon added Successfully\");\r\n      closeModal(false);\r\n      window.location.reload();\r\n    } catch (err) {\r\n      console.log(err);\r\n      message.error(\"Coupon not added\");\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const getAllCategory = async () => {\r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",\r\n          {},\r\n          { headers: { authToken } }\r\n        );\r\n\r\n        setCategory(data);\r\n        setCategory_Name(data[0].category_name);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        message.error(\"There is some error\");\r\n      }\r\n    };\r\n    getAllCategory();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"modal__container\">\r\n        <div className=\"modalTitle\">\r\n          <h2>Create a Coupon</h2>\r\n          <CancelIcon onClick={() => closeModal(false)} />\r\n        </div>\r\n        <div className=\"editForm\" style={{ width: \"100%\" }}>\r\n          <div className=\"scroll__container\" style={{ height: \"100%\" }}>\r\n            <div className=\"editField\">\r\n              <p>Coupon Code</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"text\"\r\n                placeholder=\"Type Here\"\r\n                onChange={(e) => setCoupon(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"editField\">\r\n              <p>Discount( in %)</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"number\"\r\n                placeholder=\"Discount in percentage\"\r\n                onChange={(e) => setDiscount(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"editField\">\r\n              <p>Price limit</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"number\"\r\n                placeholder=\"Enter a price limit\"\r\n                onChange={(e) => setPricelimit(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"editField\">\r\n              <p>Quantity</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"number\"\r\n                placeholder=\"Enter coupon quantity\"\r\n                onChange={(e) => setQuantity(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"editField\">\r\n              <p>Valid till</p>\r\n              <input\r\n                autoComplete=\"new-password\"\r\n                type=\"date\"\r\n                placeholder=\"Date till which the coupon is valid\"\r\n                onChange={(e) => setValid_till(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"editField\">\r\n              <p>Category</p>\r\n              <select\r\n                name=\"cat\"\r\n                className=\"dropdown\"\r\n                onChange={(e) => setCategory_Name(e.target.value)}\r\n\r\n              >\r\n                {category.map((cat) => (\r\n                  <option key={cat.id} value={cat.category_name}>\r\n                    {cat.category_name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"editField\">\r\n              <p>Description</p>\r\n              <textarea\r\n                autoComplete=\"new-password\"\r\n                name=\"coupon__desc\"\r\n                placeholder=\"Add a short description (optional)\"\r\n                onChange={(e) => setDescription(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"modalBottom\">\r\n          <button className=\"button__type4\" onClick={(e) => addcoupon(e)}>\r\n            Done\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCouponModal;\r\n"]},"metadata":{},"sourceType":"module"}