{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./AllCouponsScreen.css\";import Coupons from\"../apis/Coupons.json\";import CreateCouponModal from\"../components/CreateCouponModal\";import axios from\"axios\";import{message}from\"antd\";import\"antd/dist/antd.css\";import Loading from\"../components/Loading\";import EDITCOUPONModal from\"../components/EDITCOUPONModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AllCouponsScreen=function AllCouponsScreen(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),coupons=_useState4[0],setCoupons=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),editcoupon=_useState8[0],setEditcoupon=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),editmodal=_useState10[0],setEditmodal=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),category=_useState12[0],setCategory=_useState12[1];useEffect(function(){var getAllCoupons=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var authToken,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;authToken=localStorage.getItem(\"authToken\");_context.next=4;return axios.post(\"https://fcfquqn69e.execute-api.ap-south-1.amazonaws.com/Prod/admin/viewallCoupons\",{},{headers:{authToken:authToken}});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setCoupons(data);setLoading(false);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);message.error(\"There is some error\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getAllCoupons(){return _ref.apply(this,arguments);};}();getAllCoupons();},[]);var Editcoupon=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(coupon){var authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;authToken=localStorage.getItem(\"authToken\");_context2.next=4;return axios.post(\"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",{},{headers:{authToken:authToken}});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;setCategory(data);setEditcoupon(coupon);setEditmodal(true);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);message.error(\"There is some error\");case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function Editcoupon(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[modalOpen&&/*#__PURE__*/_jsx(CreateCouponModal,{closeModal:setModalOpen}),editmodal&&/*#__PURE__*/_jsx(EDITCOUPONModal,{closeeditmodal:setEditmodal,editcoupon:editcoupon,category:category}),/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainerTop\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"pageHeading\",children:\"All Coupons\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn_type3\",onClick:function onClick(){return setModalOpen(true);},children:\"Add a Coupon\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:\"20%\",textAlign:\"center\"},children:\"Coupon Code\"}),/*#__PURE__*/_jsx(\"td\",{style:{width:\"20%\",textAlign:\"center\"},children:\"Discount(in %)\"}),/*#__PURE__*/_jsx(\"td\",{style:{width:\"20%\",textAlign:\"center\"},children:\"Created On\"}),/*#__PURE__*/_jsx(\"td\",{style:{width:\"20%\",textAlign:\"center\"},children:\"Valid Till\"}),/*#__PURE__*/_jsx(\"td\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:coupons.map(function(coupon){return/*#__PURE__*/_jsxs(\"tr\",{className:\"list\",style:{padding:\"10px\"},children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\",padding:\"5px\"},children:coupon.coupon}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\",padding:\"5px\"},children:coupon.discount}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\",padding:\"5px\"},children:coupon.create_date}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\",padding:\"5px\"},children:coupon.valid_till}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\",padding:\"5px\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn__type1\",style:{padding:\"3px 10px 3px 10px\",borderColor:coupon.is_active===\"0\"?\"#F33535\":\"#00ff00\",backgroundColor:coupon.is_active===\"0\"?\"#F33535\":\"#00ff00\",color:\"white\"},onClick:function onClick(){return Editcoupon(coupon);},children:\"Edit\"})})]},coupon.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"screen__bottom\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom__left\"})]})]})]})});};export default AllCouponsScreen;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/screens/AllCouponsScreen.jsx"],"names":["React","useState","useEffect","Coupons","CreateCouponModal","axios","message","Loading","EDITCOUPONModal","AllCouponsScreen","modalOpen","setModalOpen","coupons","setCoupons","loading","setLoading","editcoupon","setEditcoupon","editmodal","setEditmodal","category","setCategory","getAllCoupons","authToken","localStorage","getItem","post","headers","data","error","Editcoupon","coupon","width","textAlign","map","padding","discount","create_date","valid_till","borderColor","is_active","backgroundColor","color","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./AllCouponsScreen.css\";\r\nimport Coupons from \"../apis/Coupons.json\";\r\nimport CreateCouponModal from \"../components/CreateCouponModal\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport Loading from \"../components/Loading\";\r\nimport EDITCOUPONModal from \"../components/EDITCOUPONModal\";\r\n\r\nconst AllCouponsScreen = () => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [coupons, setCoupons] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editcoupon, setEditcoupon] = useState({});\r\n  const [editmodal, setEditmodal] = useState(false);\r\n  const [category, setCategory] = useState([]);\r\n  useEffect(() => {\r\n    const getAllCoupons = async () => {\r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://fcfquqn69e.execute-api.ap-south-1.amazonaws.com/Prod/admin/viewallCoupons\",\r\n          {},\r\n          { headers: { authToken } }\r\n        );\r\n\r\n        setCoupons(data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        message.error(\"There is some error\");\r\n      }\r\n    };\r\n    getAllCoupons();\r\n  }, []);\r\n  const Editcoupon = async(coupon) => {\r\n    \r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",\r\n          {},\r\n          { headers: { authToken } }\r\n        );\r\n       \r\n setCategory(data);\r\n setEditcoupon(coupon);\r\n        setEditmodal(true);\r\n  \r\n\r\n      \r\n      } catch (err) {\r\n        message.error(\"There is some error\");\r\n      }\r\n    \r\n    \r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          {modalOpen && <CreateCouponModal closeModal={setModalOpen} />}\r\n          {editmodal && (\r\n            <EDITCOUPONModal\r\n              closeeditmodal={setEditmodal}\r\n              editcoupon={editcoupon}\r\n              category={category}\r\n            />\r\n          )}\r\n          <div className=\"pageContainer\">\r\n            <div className=\"pageContainerTop\">\r\n              <p className=\"pageHeading\">All Coupons</p>\r\n              <button className=\"btn_type3\" onClick={() => setModalOpen(true)}>\r\n                Add a Coupon\r\n              </button>\r\n            </div>\r\n            <div className=\"line\" />\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <td   style={{\r\n                      width: \"20%\",\r\n\r\n                      textAlign: \"center\",\r\n                    }}>Coupon Code</td>\r\n                  <td  style={{\r\n                      width: \"20%\",\r\n\r\n                      textAlign: \"center\",\r\n                    }}>Discount(in %)</td>\r\n                  <td  style={{\r\n                      width: \"20%\",\r\n\r\n                      textAlign: \"center\",\r\n                    }}>Created On</td>\r\n                  <td  style={{\r\n                      width: \"20%\",\r\n\r\n                      textAlign: \"center\",\r\n                    }}>Valid Till</td>\r\n                  <td />\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {coupons.map((coupon) => (\r\n                  <tr\r\n                    key={coupon.id}\r\n                    className=\"list\"\r\n                    style={{ padding: \"10px\" }}\r\n                  >\r\n                    <td   style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"5px\",\r\n                      }}>{coupon.coupon}</td>\r\n                    <td  style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"5px\",\r\n                      }}>{coupon.discount}</td>\r\n                    <td  style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"5px\",\r\n                      }}>{coupon.create_date}</td>\r\n                    <td  style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"5px\",\r\n                      }}>{coupon.valid_till}</td>\r\n                    <td  style={{\r\n                        textAlign: \"center\",\r\n                        padding: \"5px\",\r\n                      }}>\r\n                    <button\r\n                        className=\"btn__type1\"\r\n                        style={{\r\n                          padding: \"3px 10px 3px 10px\",\r\n                          borderColor:\r\n                            coupon.is_active === \"0\" ? \"#F33535\" : \"#00ff00\",\r\n                          backgroundColor:\r\n                            coupon.is_active === \"0\" ? \"#F33535\" : \"#00ff00\",\r\n                          color: \"white\",\r\n                        }}\r\n                        onClick={() => Editcoupon(coupon)}\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div id=\"screen__bottom\">\r\n              <div></div>\r\n              <div className=\"bottom__left\"></div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AllCouponsScreen;\r\n"]},"metadata":{},"sourceType":"module"}