{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./Modal.css\";import CancelIcon from\"@mui/icons-material/Cancel\";import axios from\"axios\";import{message}from\"antd\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EDITCATEGORYModal=function EDITCATEGORYModal(_ref){var closeeditmodal=_ref.closeeditmodal,editcat=_ref.editcat;var navigate=useNavigate();var _useState=useState({url:editcat.img}),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(editcat.category_name),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState(editcat.active),_useState6=_slicedToArray(_useState5,2),activate=_useState6[0],setActivate=_useState6[1];var image64;var base64=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;file=e.target.files[0];_context.next=4;return convertimage(file);case 4:image64=_context.sent;message.success(\"Image chosen Successfully\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);message.error(\"Please choose again\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function base64(_x){return _ref2.apply(this,arguments);};}();var convertimage=function convertimage(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){return resolve(reader.result);};reader.onerror=function(error){return reject(error);};});};var uploadimage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var baseindex,type,Content,authToken,img,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(image64){_context2.next=2;break;}return _context2.abrupt(\"return\",message.error(\"Please choose an image\"));case 2:_context2.prev=2;e.preventDefault();baseindex=image64.indexOf(\"base64,\");type=image64.slice(11,baseindex-1);Content=\"image/\"+image64.slice(11,baseindex-1);authToken=localStorage.getItem(\"authToken\");img=image64.slice(baseindex+7);_context2.next=11;return axios.post(\"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",{img:img,type:type,Content:Content},{headers:{authToken:authToken,\"Content-Type\":\"application/json\"}});case 11:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setImage(data);message.success(\"Image uploaded Successfully\");_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](2);message.error(\"Error uploading image\");case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[2,17]]);}));return function uploadimage(_x2){return _ref3.apply(this,arguments);};}();var editCategory=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var _editCategory,authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!(!category||!image.url)){_context3.next=3;break;}return _context3.abrupt(\"return\",message.error(\"Please fill all the fields or please click on upload button to upload image\"));case 3:_editCategory={name:category,id:editcat.id,active:activate,url:image.url};authToken=localStorage.getItem(\"authToken\");_context3.next=7;return axios.post(\"https://8zifq105r5.execute-api.ap-south-1.amazonaws.com/Prod/admin/editCategory\",_editCategory,{headers:{authToken:authToken}});case 7:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;message.success(\"Category edited Successfully\");closeeditmodal(false);window.location.reload();_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);message.error(\"Category not edited\");case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return function editCategory(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__container\",style:{width:\"40%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modalTitle\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Category\"}),/*#__PURE__*/_jsx(CancelIcon,{onClick:function onClick(){return closeeditmodal(false);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editForm\",style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scroll__container\",style:{height:\"70%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category Name\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"text\",placeholder:\"Enter new category name\",onChange:function onChange(e){return setCategory(e.target.value);},value:category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Add Image\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"button__type5\",onClick:uploadimage,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",autoComplete:\"new-password\",placeholder:\"Upload Image\",onChange:function onChange(e){return base64(e);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"cat\",className:\"dropdown\",onChange:function onChange(e){return setActivate(e.target.value);},defaultValue:activate===\"1\"?\"1\":\"0\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Activate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Deactivate\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBottom\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button__type4\",onClick:function onClick(e){return editCategory(e);},children:\"Done\"})})]})]})})});};export default EDITCATEGORYModal;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/components/EDITCATEGORYModal.jsx"],"names":["React","useState","useEffect","CancelIcon","axios","message","useNavigate","EDITCATEGORYModal","closeeditmodal","editcat","navigate","url","img","image","setImage","category_name","category","setCategory","active","activate","setActivate","image64","base64","e","file","target","files","convertimage","success","error","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","uploadimage","preventDefault","baseindex","indexOf","type","slice","Content","authToken","localStorage","getItem","post","headers","data","editCategory","name","id","window","location","reload","width","height","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Modal.css\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst EDITCATEGORYModal = ({ closeeditmodal, editcat }) => {\r\n  const navigate = useNavigate();\r\n  const [image, setImage] = useState({ url: editcat.img });\r\n\r\n  const [category, setCategory] = useState(editcat.category_name);\r\n  const [activate, setActivate] = useState(editcat.active);\r\n  let image64;\r\n\r\n  const base64 = async (e) => {\r\n    try {\r\n      const file = e.target.files[0];\r\n      image64 = await convertimage(file);\r\n\r\n      message.success(\"Image chosen Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Please choose again\");\r\n    }\r\n  };\r\n\r\n  const convertimage = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = (error) => reject(error);\r\n    });\r\n  };\r\n\r\n  const uploadimage = async (e) => {\r\n    if (!image64) {\r\n      return message.error(\"Please choose an image\");\r\n    }\r\n    try {\r\n      e.preventDefault();\r\n      const baseindex = image64.indexOf(\"base64,\");\r\n\r\n      const type = image64.slice(11, baseindex - 1);\r\n      const Content = \"image/\" + image64.slice(11, baseindex - 1);\r\n\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const img = image64.slice(baseindex + 7);\r\n\r\n      const { data } = await axios.post(\r\n        \"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",\r\n        { img, type, Content },\r\n        {\r\n          headers: {\r\n            authToken,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      setImage(data);\r\n      message.success(\"Image uploaded Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Error uploading image\");\r\n    }\r\n  };\r\n\r\n  const editCategory = async (e) => {\r\n    try {\r\n      if (!category || !image.url) {\r\n        return message.error(\r\n          \"Please fill all the fields or please click on upload button to upload image\"\r\n        );\r\n      }\r\n\r\n      const editCategory = {\r\n        name: category,\r\n        id: editcat.id,\r\n        active: activate,\r\n        url: image.url,\r\n      };\r\n\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const { data } = await axios.post(\r\n        \"https://8zifq105r5.execute-api.ap-south-1.amazonaws.com/Prod/admin/editCategory\",\r\n        editCategory,\r\n        { headers: { authToken } }\r\n      );\r\n\r\n      message.success(\"Category edited Successfully\");\r\n      closeeditmodal(false);\r\n      window.location.reload();\r\n    } catch (err) {\r\n      message.error(\"Category not edited\");\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"modal\">\r\n        <div className=\"modal__container\" style={{ width: \"40%\" }}>\r\n          <div className=\"modalTitle\">\r\n            <h2>Create Category</h2>\r\n            <CancelIcon onClick={() => closeeditmodal(false)} />\r\n          </div>\r\n          <div className=\"editForm\" style={{ width: \"100%\" }}>\r\n            <div className=\"scroll__container\" style={{ height: \"70%\" }}>\r\n              <div className=\"editField\">\r\n                <p>Category Name</p>\r\n                <input\r\n                  autoComplete=\"new-password\"\r\n                  type=\"text\"\r\n                  placeholder=\"Enter new category name\"\r\n                  onChange={(e) => setCategory(e.target.value)}\r\n                  value={category}\r\n                />\r\n              </div>\r\n              <div className=\"editField\">\r\n                <p>\r\n                  Add Image{\" \"}\r\n                  <button className=\"button__type5\" onClick={uploadimage}>\r\n                    Upload\r\n                  </button>\r\n                </p>\r\n                <input\r\n                  type=\"file\"\r\n                  autoComplete=\"new-password\"\r\n                  placeholder=\"Upload Image\"\r\n                  onChange={(e) => base64(e)}\r\n                />{\" \"}\r\n              </div>\r\n              <div className=\"editField\">\r\n                <p>Category</p>\r\n                <select\r\n                  name=\"cat\"\r\n                  className=\"dropdown\"\r\n                  onChange={(e) => setActivate(e.target.value)}\r\n                  defaultValue={activate === \"1\" ? \"1\" : \"0\"}\r\n                >\r\n                  <option value=\"1\">Activate</option>\r\n                  <option value=\"0\">Deactivate</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"modalBottom\">\r\n              <button\r\n                className=\"button__type4\"\r\n                onClick={(e) => editCategory(e)}\r\n              >\r\n                Done\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EDITCATEGORYModal;\r\n"]},"metadata":{},"sourceType":"module"}