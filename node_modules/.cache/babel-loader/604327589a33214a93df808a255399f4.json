{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import\"./Modal.css\";import axios from\"axios\";import{message}from\"antd\";import\"antd/dist/antd.css\";import CancelIcon from\"@mui/icons-material/Cancel\";import Loading from\"../components/Loading\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ADDPRODUCTModal=function ADDPRODUCTModal(_ref){var closeModal=_ref.closeModal,category=_ref.category;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"None\"),_useState4=_slicedToArray(_useState3,2),category_name=_useState4[0],setCategory_Name=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),condition=_useState8[0],setCondition=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),description=_useState10[0],setDescription=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),image=_useState12[0],setImage=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),MRP=_useState14[0],setMRP=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),stock=_useState16[0],setStock=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),loading=_useState18[0],setLoading=_useState18[1];var image64;var base64=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;file=e.target.files[0];_context.next=4;return convertimage(file);case 4:image64=_context.sent;message.success(\"Image chosen Successfully\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);message.error(\"Please choose again\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function base64(_x){return _ref2.apply(this,arguments);};}();var convertimage=function convertimage(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){return resolve(reader.result);};reader.onerror=function(error){return reject(error);};});};var uploadimage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var baseindex,type,Content,authToken,img,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(image64){_context2.next=2;break;}return _context2.abrupt(\"return\",message.error(\"Please choose an image\"));case 2:_context2.prev=2;e.preventDefault();baseindex=image64.indexOf(\"base64,\");type=image64.slice(11,baseindex-1);Content=\"image/\"+image64.slice(11,baseindex-1);authToken=localStorage.getItem(\"authToken\");img=image64.slice(baseindex+7);_context2.next=11;return axios.post(\"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",{img:img,type:type,Content:Content},{headers:{authToken:authToken,\"Content-Type\":\"application/json\"}});case 11:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;setImage(data);message.success(\"Image uploaded Successfully\");_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](2);message.error(\"Error uploading image\");case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[2,17]]);}));return function uploadimage(_x2){return _ref3.apply(this,arguments);};}();var addProduct=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var newProduct,authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();if(!(!name||!category_name||!price||!description||!image.url||!stock||!MRP)){_context3.next=3;break;}return _context3.abrupt(\"return\",message.error(\"Please fill all the fields or please click on upload button to upload image\"));case 3:newProduct={name:name,category_name:category_name,price:price,description:description,primary_image:image.url,stock:stock,MRP:MRP};_context3.prev=4;authToken=localStorage.getItem(\"authToken\");_context3.next=8;return axios.post(\"https://9s28t7fuzd.execute-api.ap-south-1.amazonaws.com/Prod/admin/addProduct\",newProduct,{headers:{authToken:authToken}});case 8:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;message.success(\"Product added Successfully\");_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](4);console.log(_context3.t0);message.error(\"Product not added\");case 17:closeModal(false);window.location.reload();case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[4,13]]);}));return function addProduct(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:!loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modalTitle\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"ADD A PRODUCT\"}),/*#__PURE__*/_jsx(CancelIcon,{onClick:function onClick(){return closeModal(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"editForm\",style:{width:\"100%\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"scroll__container\",style:{height:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"text\",placeholder:\"product name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"cat\",className:\"dropdown\",defaultValue:\"None\",onChange:function onChange(e){setCategory_Name(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"None\"}),category.map(function(cat){return/*#__PURE__*/_jsx(\"option\",{value:cat.category_name,children:cat.category_name},cat.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"text\",placeholder:\"product price\",onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"MRP\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"number\",placeholder:\"product mrp\",onChange:function onChange(e){return setMRP(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Stock\"}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",type:\"number\",placeholder:\"product stock\",onChange:function onChange(e){return setStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Add Image\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"button__type5\",onClick:uploadimage,children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",autoComplete:\"new-password\",placeholder:\"Upload Image\",onChange:function onChange(e){return base64(e);}}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editField\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{autoComplete:\"new-password\",name:\"coupon__desc\",placeholder:\"Add a short description (optional)\",onChange:function onChange(e){return setDescription(e.target.value);}})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBottom\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button__type4\",onClick:function onClick(e){return addProduct(e);},children:\"Done\"})})]})})})});};export default ADDPRODUCTModal;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/components/ADDPRODUCTModal.jsx"],"names":["React","useEffect","useState","axios","message","CancelIcon","Loading","useNavigate","ADDPRODUCTModal","closeModal","category","navigate","name","setName","category_name","setCategory_Name","price","setPrice","condition","setCondition","description","setDescription","image","setImage","MRP","setMRP","stock","setStock","loading","setLoading","image64","base64","e","file","target","files","convertimage","success","error","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","uploadimage","preventDefault","baseindex","indexOf","type","slice","Content","authToken","localStorage","getItem","img","post","headers","data","addProduct","url","newProduct","primary_image","console","log","window","location","reload","width","height","value","map","cat","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Modal.css\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport CancelIcon from \"@mui/icons-material/Cancel\";\r\nimport Loading from \"../components/Loading\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ADDPRODUCTModal = ({ closeModal, category }) => {\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const [category_name, setCategory_Name] = useState(\"None\");\r\n  const [price, setPrice] = useState();\r\n  const [condition, setCondition] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState({});\r\n  const [MRP, setMRP] = useState();\r\n  const [stock, setStock] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  let image64;\r\n\r\n  const base64 = async (e) => {\r\n    try {\r\n      const file = e.target.files[0];\r\n      image64 = await convertimage(file);\r\n\r\n      message.success(\"Image chosen Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Please choose again\");\r\n    }\r\n  };\r\n\r\n  const convertimage = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = (error) => reject(error);\r\n    });\r\n  };\r\n\r\n  const uploadimage = async (e) => {\r\n    if (!image64) {\r\n      return message.error(\"Please choose an image\");\r\n    }\r\n    try {\r\n      e.preventDefault();\r\n      const baseindex = image64.indexOf(\"base64,\");\r\n\r\n      const type = image64.slice(11, baseindex - 1);\r\n      const Content = \"image/\" + image64.slice(11, baseindex - 1);\r\n\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n      const img = image64.slice(baseindex + 7);\r\n\r\n      const { data } = await axios.post(\r\n        \"https://woslo04mf4.execute-api.ap-south-1.amazonaws.com/Prod/admin/uploadFiles\",\r\n        { img, type, Content },\r\n        {\r\n          headers: {\r\n            authToken,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      setImage(data);\r\n      message.success(\"Image uploaded Successfully\");\r\n    } catch (err) {\r\n      message.error(\"Error uploading image\");\r\n    }\r\n  };\r\n\r\n  const addProduct = async (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      !name ||\r\n      !category_name ||\r\n      !price ||\r\n      !description ||\r\n      !image.url ||\r\n      !stock ||\r\n      !MRP\r\n    ) {\r\n      return message.error(\r\n        \"Please fill all the fields or please click on upload button to upload image\"\r\n      );\r\n    }\r\n    const newProduct = {\r\n      name,\r\n      category_name,\r\n      price,\r\n      description,\r\n      primary_image: image.url,\r\n      stock,\r\n      MRP,\r\n    };\r\n\r\n    try {\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n\r\n      const { data } = await axios.post(\r\n        \"https://9s28t7fuzd.execute-api.ap-south-1.amazonaws.com/Prod/admin/addProduct\",\r\n        newProduct,\r\n        { headers: { authToken } }\r\n      );\r\n\r\n      message.success(\"Product added Successfully\");\r\n    } catch (err) {\r\n      console.log(err);\r\n      message.error(\"Product not added\");\r\n    }\r\n    closeModal(false);\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!loading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          <div className=\"modal\">\r\n            <div className=\"modal__container\">\r\n              <div className=\"modalTitle\">\r\n                <h2>ADD A PRODUCT</h2>\r\n                <CancelIcon onClick={() => closeModal(false)} />\r\n              </div>\r\n              <div className=\"editForm\" style={{ width: \"100%\" }}>\r\n                <div className=\"scroll__container\" style={{ height: \"100%\" }}>\r\n                  <div className=\"editField\">\r\n                    <p>Name</p>\r\n                    <input\r\n                      autoComplete=\"new-password\"\r\n                      type=\"text\"\r\n                      placeholder=\"product name\"\r\n                      onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"editField\">\r\n                    <p>Category</p>\r\n                    <select\r\n                      name=\"cat\"\r\n                      className=\"dropdown\"\r\n                      defaultValue=\"None\"\r\n                      onChange={(e) => {\r\n                        setCategory_Name(e.target.value);\r\n                      }}\r\n                    >\r\n                      <option value=\"none\">None</option>\r\n                      {category.map((cat) => (\r\n                        <option key={cat.id} value={cat.category_name}>\r\n                          {cat.category_name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"editField\">\r\n                    <p>Price</p>\r\n                    <input\r\n                      autoComplete=\"new-password\"\r\n                      type=\"text\"\r\n                      placeholder=\"product price\"\r\n                      onChange={(e) => setPrice(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"editField\">\r\n                    <p>MRP</p>\r\n                    <input\r\n                      autoComplete=\"new-password\"\r\n                      type=\"number\"\r\n                      placeholder=\"product mrp\"\r\n                      onChange={(e) => setMRP(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"editField\">\r\n                    <p>Stock</p>\r\n                    <input\r\n                      autoComplete=\"new-password\"\r\n                      type=\"number\"\r\n                      placeholder=\"product stock\"\r\n                      onChange={(e) => setStock(e.target.value)}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"editField\">\r\n                    <p>\r\n                      Add Image{\" \"}\r\n                      <button className=\"button__type5\" onClick={uploadimage}>\r\n                        Upload\r\n                      </button>\r\n                    </p>\r\n                    <input\r\n                      type=\"file\"\r\n                      autoComplete=\"new-password\"\r\n                      placeholder=\"Upload Image\"\r\n                      onChange={(e) => base64(e)}\r\n                    />{\" \"}\r\n                  </div>\r\n\r\n                  <div className=\"editField\">\r\n                    <p>Description</p>\r\n                    <textarea\r\n                      autoComplete=\"new-password\"\r\n                      name=\"coupon__desc\"\r\n                      placeholder=\"Add a short description (optional)\"\r\n                      onChange={(e) => setDescription(e.target.value)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"modalBottom\">\r\n                <button\r\n                  className=\"button__type4\"\r\n                  onClick={(e) => addProduct(e)}\r\n                >\r\n                  Done\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ADDPRODUCTModal;\r\n"]},"metadata":{},"sourceType":"module"}