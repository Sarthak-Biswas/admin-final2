{"ast":null,"code":"import _asyncToGenerator from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/entropy/Downloads/rasan/RationPro-AdminPanel/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import Products from\"../apis/Products.json\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{message}from\"antd\";import\"antd/dist/antd.css\";import Loading from\"../components/Loading\";import ADDPRODUCTModal from\"../components/ADDPRODUCTModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductsScreen=function ProductsScreen(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var navigate=useNavigate();var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];useEffect(function(){var getAllProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var authToken,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;authToken=localStorage.getItem(\"authToken\");_context.next=4;return axios.post(\"https://58wlnugovh.execute-api.ap-south-1.amazonaws.com/Prod/user/getallProductDetails\",{},{headers:{authToken:authToken}});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setProducts(data);setLoading(false);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);message.error(\"There is some error\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getAllProducts(){return _ref.apply(this,arguments);};}();getAllProducts();var getAllCategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var authToken,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;authToken=localStorage.getItem(\"authToken\");_context2.next=4;return axios.post(\"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",{},{headers:{authToken:authToken}});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;setCategory(data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);message.error(\"Server error\");case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function getAllCategory(){return _ref2.apply(this,arguments);};}();getAllCategory();},[]);var deleteProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var authToken;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;authToken=localStorage.getItem(\"authToken\");_context3.next=4;return axios.post(\"https://2lebf9n7tk.execute-api.ap-south-1.amazonaws.com/Prod/admin/deleteProduct\",{id:id},{headers:{authToken:authToken}});case 4:window.location.reload();message.success(\"Product deleted successfully\");_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);message.error(\"Product not deleted\");case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteProduct(_x){return _ref3.apply(this,arguments);};}();var deletepopup=function deletepopup(id){var confirmdelete=window.confirm(\"Are you sure you want to delete this product?\");if(confirmdelete){deleteProduct(id);}};return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",modalOpen&&/*#__PURE__*/_jsx(ADDPRODUCTModal,{closeModal:setModalOpen,category:category}),/*#__PURE__*/_jsxs(\"div\",{className:\"pageContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pageContainerTop\",children:/*#__PURE__*/_jsx(\"p\",{className:\"pageHeading\",children:\"All Products\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Price(in Rs)\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Availability\"}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"imagesize\",children:[\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{style:{width:\"100px\",height:\"70px\",borderRadius:\"10px\"},src:product.primary_image,alt:\"\"})})]}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.category_name}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.availability?\"In Stock\":\"Out of Stock\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn__type1\",onClick:function onClick(){return navigate(\"/product/\".concat(product.id));},children:\"View / Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn__type1\",onClick:function onClick(){return deletepopup(product.id);},children:\"Delete\"})})]},product.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"screen__bottom\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn__type2\",onClick:function onClick(){return setModalOpen(true);},children:\"Add Product\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom__left\"})]})]})]})});};export default ProductsScreen;","map":{"version":3,"sources":["/home/entropy/Downloads/rasan/RationPro-AdminPanel/src/screens/ProductsScreen.jsx"],"names":["React","useEffect","useState","Products","useNavigate","axios","message","Loading","ADDPRODUCTModal","ProductsScreen","modalOpen","setModalOpen","products","setProducts","navigate","loading","setLoading","category","setCategory","getAllProducts","authToken","localStorage","getItem","post","headers","data","error","getAllCategory","deleteProduct","id","window","location","reload","success","deletepopup","confirmdelete","confirm","map","product","width","height","borderRadius","primary_image","name","category_name","price","availability"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Products from \"../apis/Products.json\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { message } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport Loading from \"../components/Loading\";\r\nimport ADDPRODUCTModal from \"../components/ADDPRODUCTModal\";\r\n\r\nconst ProductsScreen = () => {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [category, setCategory] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getAllProducts = async () => {\r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://58wlnugovh.execute-api.ap-south-1.amazonaws.com/Prod/user/getallProductDetails\",\r\n          {},\r\n          { headers: { authToken } }\r\n        );\r\n\r\n        setProducts(data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        message.error(\"There is some error\");\r\n      }\r\n    };\r\n    getAllProducts();\r\n    const getAllCategory = async () => {\r\n      try {\r\n        const authToken = localStorage.getItem(\"authToken\");\r\n\r\n        const { data } = await axios.post(\r\n          \"https://chnbq3osxj.execute-api.ap-south-1.amazonaws.com/Prod/user/getCategory\",\r\n          {},\r\n          { headers: { authToken } }\r\n        );\r\n\r\n        setCategory(data);\r\n      } catch (err) {\r\n        message.error(\"Server error\");\r\n      }\r\n    };\r\n    getAllCategory();\r\n  }, []);\r\n\r\n  const deleteProduct = async (id) => {\r\n    try {\r\n      const authToken = localStorage.getItem(\"authToken\");\r\n\r\n      await axios.post(\r\n        \"https://2lebf9n7tk.execute-api.ap-south-1.amazonaws.com/Prod/admin/deleteProduct\",\r\n        { id },\r\n        { headers: { authToken } }\r\n      );\r\n\r\n      window.location.reload();\r\n      message.success(\"Product deleted successfully\");\r\n    } catch (err) {\r\n      message.error(\"Product not deleted\");\r\n    }\r\n  };\r\n\r\n  const deletepopup = (id) => {\r\n    const confirmdelete = window.confirm(\r\n      \"Are you sure you want to delete this product?\"\r\n    );\r\n    if (confirmdelete) {\r\n      deleteProduct(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <Loading />\r\n      ) : (\r\n        <>\r\n          {\" \"}\r\n          {modalOpen && (\r\n            <ADDPRODUCTModal closeModal={setModalOpen} category={category} />\r\n          )}\r\n          <div className=\"pageContainer\">\r\n            <div className=\"pageContainerTop\">\r\n              <p className=\"pageHeading\">All Products</p>\r\n            </div>\r\n            <div className=\"line\" />\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <td></td>\r\n                  <td>Name</td>\r\n                  <td>Category</td>\r\n                  <td>Price(in Rs)</td>\r\n                  <td>Availability</td>\r\n                  <td></td>\r\n                  <td></td>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {products.map((product) => (\r\n                  <tr key={product.id} className=\"list\">\r\n                    <div className=\"imagesize\">\r\n                      {\" \"}\r\n                      <td>\r\n                        <img\r\n                          style={{\r\n                            width: \"100px\",\r\n                            height: \"70px\",\r\n                            borderRadius: \"10px\",\r\n                          }}\r\n                          src={product.primary_image}\r\n                          alt=\"\"\r\n                        />\r\n                      </td>\r\n                    </div>\r\n                    <td>{product.name}</td>\r\n                    <td>{product.category_name}</td>\r\n                    <td>{product.price}</td>\r\n                    <td>\r\n                      {product.availability ? \"In Stock\" : \"Out of Stock\"}\r\n                    </td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn__type1\"\r\n                        onClick={() => navigate(`/product/${product.id}`)}\r\n                      >\r\n                        View / Edit\r\n                      </button>\r\n                    </td>\r\n\r\n                    <td>\r\n                      <button\r\n                        className=\"btn__type1\"\r\n                        onClick={() => deletepopup(product.id)}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div id=\"screen__bottom\">\r\n              <button className=\"btn__type2\" onClick={() => setModalOpen(true)}>\r\n                Add Product\r\n              </button>\r\n              <div className=\"bottom__left\"></div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductsScreen;\r\n"]},"metadata":{},"sourceType":"module"}